<!DOCTYPE HTML>
<html>
<head>
    <title>Register Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h2 {
            color: #2e8b57;
            text-align: center;
        }
        table {
            width: 100%;
            max-width: 400px;
            margin: 20px auto;
            border-collapse: collapse;
        }
        td {
            padding: 10px;
        }
        input[type="text"], input[type="password"] {
            width: calc(100% - 30px); /* Adjust width to accommodate the icon */
            padding: 8px;
            margin: 5px 0;
            box-sizing: border-box;
        }
        .input-container {
            position: relative;
            width: 100%;
            margin: 5px 0;
        }
        .eye-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            cursor: pointer;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4C6.48 4 2.26 7.36 1.11 11.29c-.23.57.32 1.17.9 1.17h.11c.04 0 .07-.01.11-.01C2.91 13.52 5.85 9.78 12 9.78s9.09 3.74 9.88 6.66c.06.16.17.26.28.26.1 0 .2-.03.29-.08.56-.27.75-.96.5-1.5C21.26 7.36 17.52 4 12 4zm0 7.78c-1.67 0-3.06-1.36-3.06-3.04 0-1.68 1.39-3.04 3.06-3.04 1.67 0 3.06 1.36 3.06 3.04 0 1.68-1.39 3.04-3.06 3.04zm0 1.77c-2.52 0-4.56 2.04-4.56 4.56s2.04 4.56 4.56 4.56c2.51 0 4.55-2.04 4.55-4.56s-2.04-4.56-4.55-4.56zm0 7.05c-1.58 0-2.86-1.29-2.86-2.86 0-1.57 1.28-2.86 2.86-2.86s2.86 1.29 2.86 2.86c0 1.57-1.28 2.86-2.86 2.86z"/></svg>') no-repeat center center;
            background-size: contain;
        }
        .eye-icon.hide {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4C6.48 4 2.26 7.36 1.11 11.29c-.23.57.32 1.17.9 1.17h.11c.04 0 .07-.01.11-.01C2.91 13.52 5.85 9.78 12 9.78s9.09 3.74 9.88 6.66c.06.16.17.26.28.26.1 0 .2-.03.29-.08.56-.27.75-.96.5-1.5C21.26 7.36 17.52 4 12 4zm0 7.78c-1.67 0-3.06-1.36-3.06-3.04 0-1.68 1.39-3.04 3.06-3.04 1.67 0 3.06 1.36 3.06 3.04 0 1.68-1.39 3.04-3.06 3.04zm0 1.77c-2.52 0-4.56 2.04-4.56 4.56s2.04 4.56 4.56 4.56c2.51 0 4.55-2.04 4.55-4.56s-2.04-4.56-4.55-4.56zm0 7.05c-1.58 0-2.86-1.29-2.86-2.86 0-1.57 1.28-2.86 2.86-2.86s2.86 1.29 2.86 2.86c0 1.57-1.28 2.86-2.86 2.86z"/></svg>');
        }
        .error {
            color: red;
            font-size: 0.9em;
        }
                
        button{
            background-color: #2e8b57;
            border: 1px solid #2e8b57;
            border-radius: 0 4px 4px 0;
            padding: 10px;
            cursor: pointer;
            color: #fff;
            font-size: 16px;
        }
    </style>
    <script>
        function validatePassword() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const submitButton = document.getElementById('submitBtn');
            let errors = [];

            if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
                errors.push('Password must contain at least one special character.');
            }
            if (!/[A-Z]/.test(password)) {
                errors.push('Password must contain at least one uppercase letter.');
            }
            if (!/\d/.test(password)) {
                errors.push('Password must contain at least one number.');
            }
            if (/\s/.test(password)) {
                errors.push('Password must not contain blank spaces.');
            }
            if (password !== confirmPassword) {
                errors.push('Passwords do not match.');
            }
            if (/[\x00-\x1F\x7F-\x9F]/.test(password)) {
                errors.push('Password must not contain control characters.');
            }

            const errorDiv = document.getElementById('errors');
            errorDiv.innerHTML = errors.join('<br>');

            submitButton.disabled = errors.length > 0;
        }

        function togglePasswordVisibility() {
            const passwordField = document.getElementById('password');
            const confirmPasswordField = document.getElementById('confirmPassword');
            const eyeIcon = document.getElementById('eyeIcon');
            const type = passwordField.type === 'password' ? 'text' : 'password';
            passwordField.type = type;
            confirmPasswordField.type = type;
            eyeIcon.classList.toggle('hide');
        }

        function preventPaste(event) {
            event.preventDefault();
            const errorDiv = document.getElementById('errors');
            errorDiv.innerHTML = 'Copy-pasting is not allowed.';
        }

        document.addEventListener('DOMContentLoaded', () => {
            const passwordField = document.getElementById('password');
            const confirmPasswordField = document.getElementById('confirmPassword');
            
            passwordField.addEventListener('paste', preventPaste);
            confirmPasswordField.addEventListener('paste', preventPaste);

            passwordField.addEventListener('keydown', (event) => {
                if (event.ctrlKey && (event.key === 'v' || event.key === 'V')) {
                    preventPaste(event);
                }
            });

            confirmPasswordField.addEventListener('keydown', (event) => {
                if (event.ctrlKey && (event.key === 'v' || event.key === 'V')) {
                    preventPaste(event);
                }
            });
        });
    </script>
</head>
<body>
    <h2>Validated Registration Page</h2>
    <form method="post" action="insert.php">
        <table>
            <tr>
                <td>Name :</td>
                <td><input type="text" name="username" required></td>
            </tr>
            <tr>
                <td>Password :</td>
                <td>
                    <div class="input-container">
                        <input type="password" name="password" id="password" onkeyup="validatePassword()" required>
                        <span id="eyeIcon" class="eye-icon" onclick="togglePasswordVisibility()"></span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Confirm Password :</td>
                <td>
                    <div class="input-container">
                        <input type="password" name="confirmPassword" id="confirmPassword" onkeyup="validatePassword()" required>
                        <span class="eye-icon" onclick="togglePasswordVisibility()"></span>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="2" class="error" id="errors"></td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center;">
                    <button type="submit" value="Register" id="submitBtn" name="submit" disabled>Register</buttontype></button>
                </td>
            </tr>
        </table>
    </form>
</body>
</html>
